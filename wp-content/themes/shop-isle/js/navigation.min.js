 !function(){var a,b,c;if(a=document.getElementById("site-navigation"),a&&(b=a.getElementsByTagName("button")[0],"undefined"!=typeof b)){if(c=a.getElementsByTagName("ul")[0],"undefined"==typeof c)return void(b.style.display="none");c.setAttribute("aria-expanded","false"),-1===c.className.indexOf("nav-menu")&&(c.className+=" nav-menu"),b.onclick=function(){-1!==a.className.indexOf("toggled")?(a.className=a.className.replace(" toggled",""),b.setAttribute("aria-expanded","false"),c.setAttribute("aria-expanded","false")):(a.className+=" toggled",b.setAttribute("aria-expanded","true"),c.setAttribute("aria-expanded","true"))},jQuery(".main-navigation, .secondary-navigation").find("a").on("focus.storefront blur.storefront",function(){jQuery(this).parents().toggleClass("focus")}),jQuery(window).load(function(){jQuery(".site-header-cart").find("a").on("focus.storefront blur.storefront",function(){jQuery(this).parents().toggleClass("focus")})})}}();

jQuery(window).load(function(){

	// product list
	jQuery('ul.products li.product .button').wrap('<div class="product-button-wrap"></div>');
	jQuery('.post-type-archive-product .products li').each(function(){
		jQuery( this ).find( 'img' ).wrap( '<div class="prod-img-wrap"></div>' );
		jQuery(this).find( '.prod-img-wrap' ).append( jQuery(this).find( '.product-button-wrap' ) );
	});

});

jQuery(document).ready(function(){
    var wooInfo = jQuery('.woocommerce-info');
    if( wooInfo.length>0 && wooInfo.closest('.container').length==0 ) {
        wooInfo.addClass('container').css({
            'margin-left': 'auto',
            'margin-right': 'auto',
        });
    }
});


/* footer fixed  */
jQuery(document).ready( fixFooterBottom );
jQuery(window).resize( fixFooterBottom );
function fixFooterBottom(){
	var pageWidth = parseInt( jQuery( window ).outerWidth(), 10);
	/* if page is less than 768px */
	if (pageWidth > 768){
		var bodyH 	= jQuery( 'body' ).outerHeight();
		var windowH = jQuery( window ).outerHeight();
        var footerSidebarHeight = jQuery('.shop_isle_footer_sidebar').outerHeight();
		if ( bodyH < windowH +footerSidebarHeight){
			jQuery( 'footer.footer' ).css({
				'position'	: 'absolute',
				'bottom'	: '0',
				'width'		: '100%',
                'z-index'   : '9'
			});
			jQuery( 'div.main' ).height( windowH-footerSidebarHeight );
		}
	}else{
		jQuery( 'footer.footer' ).css({
			'position'	: 'relative'
		});
		jQuery( 'div.main' ).height( 'auto' );
	}
}


/*** DROPDOWN FOR MOBILE MENU */
var callback_mobile_dropdown = function () {

	var navLi = jQuery('.navbar-nav li');

    navLi.each(function(){
        if ( jQuery(this).find('ul').length > 0 && !jQuery(this).hasClass('has_children') ){
            jQuery(this).addClass('has_children');
            jQuery(this).find('a').first().after('<p class="dropdownmenu"></p>');
        }
    });
    jQuery('.dropdownmenu').click(function(){
        if( jQuery(this).parent('li').hasClass('this-open') ){
            jQuery(this).parent('li').removeClass('this-open');
        }else{
            jQuery(this).parent('li').addClass('this-open');
        }
    });

};
jQuery(document).ready(callback_mobile_dropdown);


/*** CENTERED MENU */
var callback_menu_align = function () {

	var headerWrap 		= jQuery('.navbar-fixed-top');
	var navWrap 		= jQuery('.navbar-nav');
	var logoWrap 		= jQuery('.shop_isle_header_title');
	var containerWrap 	= jQuery('.container');
	var classToAdd		= 'menu-align-center';

	if ( headerWrap.hasClass(classToAdd) ) 
	{
        headerWrap.removeClass(classToAdd);
	}
    var logoWidth 		= logoWrap.outerWidth();
    var menuWidth 		= navWrap.outerWidth();
    var containerWidth 	= containerWrap.width();
    if ( menuWidth + logoWidth > containerWidth ) {
        headerWrap.addClass(classToAdd);
    }
    else
    {
        if ( headerWrap.hasClass(classToAdd) )
        {
            headerWrap.removeClass(classToAdd);
        }
    }

    var module_header = jQuery('.page-module-header');
	var module_content = jQuery('.page-module-content');
    if( module_header.length>0 && jQuery('.module-cart-bottom').length<1 ) {
    	module_header.css( 'padding-top', padding_top );
    	var padding_top = headerWrap.outerHeight()+50;
    	module_header.css( 'padding-top', padding_top );
    } else if( module_content.length>0 && jQuery('.module-cart-bottom').length<1 ) {
    	module_content.css( 'padding-top', padding_top );
    	var padding_top = headerWrap.outerHeight()+75;
    	module_content.css( 'padding-top', padding_top );
    }

}
jQuery(window).load(callback_menu_align);
jQuery(window).resize(callback_menu_align);


